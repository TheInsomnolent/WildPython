import { Image } from 'mdx-deck'


# Wild Python
<a href="https://siligong.slack.com/team/U2F39HD5K/">@griff</a> on Siligong

---

## `$ whoami`
- 3D printer control
- Bulk data processing
- CG render pipelines
- API archetecture control


- Delpoyed robotics
- Machine learning & classification


- Environmental physics analysis
- General relativity simulations

---

## Why do we use Python?
There are many shortcomings, but

- It's simple enough...
- It's quick enough...
- It's robust enough...
- It's universal enough...

for pretty much anything.

---

Enourmous listing of high-calibre public packages

- `Requests`
- `Numpy`
- `SciPy`
- `TensorFlow`
- `Pandas`
- `Scrapy`
- `Pillow`
- `Django`
- `Flask`
- `IPython`

---

## So what are the options for sharing our packages?

<center>
Packaging - Freezing - Containers
</center>

---

|                               |   Git repo  | Source dist | Built dist | Freeze | Container |
|-------------------------------|-------------|-------------|------------|--------|-----------|
| End-user doesn't build        |      ✕      |      ✕      |      ✓     |    ✓   |     ✓     |
| Dependency builds fixed       |      ✕      |      ✕      |      ✓     |    ✓   |     ✓     |
| Python not required           |      ✕      |      ✕      |      ✕     |    ✓   |     ✓     |
| Platform agnostic             |      ✕      |      ✕      |      ✕     |    ✕   |     ✓     |

---

# Easy mode
## Pip installable git repo
- Proper module structure
- `setup.py` file

---

# One more step 
## Source distribution (sdist)
- Easily sharable tarball / zip
- Still retains raw source code
- PyPI hostable

---

# Wheels in wheels in wheels
## Built distribution (bdist)
- No end-user building required
    - No shipping devtools to users
- Runtime / version specific builds
    - Manage package dependencies with C-Extensions
    - Great for Tox
- `Universal wheels` for pythony python.

---

# Sharing is caring
## Publish to PyPI

Make sure to bump that version number!

```bash
$ pip install twine
$ twine upload dist/*
```

GOTCHA: Old versions of pip will point to wrong PyPI. 

Join the Pip19+ life!

---

# But what about Derek from sales?
## Freezing packages
- Run python without python.
- Simple as double-clicking
```bash
$ pip install pyInstaller
```

```bash
$ pyInstaller -n widgetApp --onefile widgetApp/__main__.py
```

---

# Where are we at?
### With pure python dependencies:
A single, universally installable file which mounts a script to $PATH
### With C-Extensions:
A build for each machine architecture which mounts a script to $PATH
### With no hope left:
A single-file executable bundled with a python interpreter

---

# Why not bring our own OS envrionment
---

<Image src="docker.jpg" />

---

### Build
```bash
$ docker build -t widget-app .
```

### Run
```bash
$ docker run -it widget-app
```

### Share
```bash
$ docker login --username=XXX
$ docker images | grep widget-app
$ docker tag <IMAGE_ID> <DOCKER_HUB_USERNAME>/widget-app:latest
$ docker push <DOCKER_HUB_USERNAME>/widget-app
```
---

```bash
$ docker run theinsomnolent/widget-app:latest
```

Have you you ever seen such a pure beauty...

---
### A finishing anecdote about Python and Docker
